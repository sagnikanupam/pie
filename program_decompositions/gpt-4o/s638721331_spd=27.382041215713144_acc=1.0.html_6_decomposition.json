{"optimized_code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main() {\n  int s; cin >> s;\n  unordered_set<int> se = {s}; // Use unordered set for faster lookup\n  int current = s;\n  int pre = current;\n  int i = 1;\n  \n  // Single loop to generate sequence and check for repeats\n  while (se.insert(current).second) { // Attempt to insert and check if newly inserted\n    i++;\n    if (current % 2 == 0) {\n      pre = current / 2;\n    } else {\n      pre = 3 * current + 1;\n    }\n    current = pre;\n  }\n  \n  cout << i << endl;\n  return 0;\n}\n"}