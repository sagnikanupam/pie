{"optimized_code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main() {\n    unordered_set<int> seen_numbers;\n    int s;\n    cin >> s;\n\n    if (!seen_numbers.insert(s).second) { // Check and insert the first number\n        cout << 1 << endl;\n        return 0;\n    }\n\n    for(int i=1; i<1000000; i++) {\n        if(s % 2 == 0) {\n            s /= 2;\n        } else {\n            s = 3*s + 1;\n        }\n\n        if (!seen_numbers.insert(s).second) { // Use set to check if the number already exists\n            cout << i + 1 << endl;\n            return 0;\n        }\n    }\n}"}