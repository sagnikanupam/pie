{"optimized_code": "#include <bits/stdc++.h>\n\nusing namespace std;\n\nint main() {\n  int s; cin >> s;\n  unordered_set<int> se; // Use unordered set for faster lookup\n  int current = s;\n  int pre = s; // Initialize pre with the initial value of s\n  int i = 1;\n  \n  // Single loop to generate sequence and check for repeats\n  while (true) { \n    se.insert(current); // Insert the current into the set immediately\n    current = (current % 2 == 0) ? current / 2 : 3 * current + 1;\n    i++;\n    if (se.find(current) != se.end()) { // Check if current already exists in the set\n      cout << i << endl; // Print the current index and exit\n      return 0;\n    }\n    pre = current; // Update pre to the current value\n  }\n}\n"}